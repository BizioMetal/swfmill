<format format="SWF">

<!-- ******************** BASIC TYPES ****************** -->

<type name="Rectangle">
	<integer name="bits" size="5" constant-size="true"/>
	<integer prop="true" signed="true" name="left" size="bits" default="0"/>
	<integer prop="true" signed="true" name="right" size="bits" default="0"/>
	<integer prop="true" signed="true" name="top" size="bits" default="0"/>
	<integer prop="true" signed="true" name="bottom" size="bits" default="0"/>
	<fill-byte/>
</type>

<type name="Color">
	<byte prop="true" name="red" default="0"/>
	<byte prop="true" name="green" default="0"/>
	<byte prop="true" name="blue" default="0"/>
	<if expression="ctx->alpha">
		<byte prop="true" name="alpha" default="0"/>
	</if>
	<fill-byte/>
</type>

<type name="String">
	<string prop="true" name="value"/>
</type>

<type name="Transform">
	<bit name="scaled"/>
	<flagged flag="scaled">
		<integer name="bitsScale" size="5" constant-size="true"/>
		<fixedpoint name="scaleX" signed="true" size="bitsScale" exp="16" prop="true" default="1"/>
		<fixedpoint name="scaleY" signed="true" size="bitsScale" exp="16" prop="true" default="1"/>
	</flagged>
	<bit name="skewed"/>
	<flagged flag="skewed">
		<integer name="bitsSkew" size="5" constant-size="true"/>
		<fixedpoint name="skewX" signed="true" size="bitsSkew" exp="16" prop="true" default="1"/>
		<fixedpoint name="skewY" signed="true" size="bitsSkew" exp="16" prop="true" default="1"/>
	</flagged>
	<integer name="bitsTranslate" size="5" constant-size="true"/>
	<integer name="transX" signed="true" size="bitsTranslate" prop="true" default="0"/>
	<integer name="transY" signed="true" size="bitsTranslate" prop="true" default="0"/>
	<fill-byte/>
</type>

<type name="ColorTransform2">
	<bit name="hasOffset"/>
	<bit name="hasFactor"/>
	<integer name="bits" size="4" constant-size="true"/>
	<flagged flag="hasFactor">
		<!-- really default=1?; ColorTransform(1) has no alpha. -->
		<integer name="factorRed" size="bits" signed="true" prop="true" default="1"/>
		<integer name="factorGreen" size="bits" signed="true" prop="true" default="1"/>
		<integer name="factorBlue" size="bits" signed="true" prop="true" default="1"/>
		<integer name="factorAlpha" size="bits" signed="true" prop="true" default="1"/>
	</flagged>
	<flagged flag="hasOffset">
		<!-- ColorTransform(1) has no alpha. -->
		<integer name="offsetRed" size="bits" signed="true" prop="true" default="1"/>
		<integer name="offsetGreen" size="bits" signed="true" prop="true" default="1"/>
		<integer name="offsetBlue" size="bits" signed="true" prop="true" default="1"/>
		<integer name="offsetAlpha" size="bits" signed="true" prop="true" default="1"/>
	</flagged>
	<fill-byte/>
</type>

<type name="Header">
	<object name="size" type="Rectangle" prop="true"/>
	<!-- framerate should be a 8.8 fixed, but is reverse? WTF? for integer values, this works: -->
	<integer name="framerate" size="16" constant-size="true" prop="true"/>
	<word name="frames" prop="true" default="1"/>
	<list name="tags" type="Tag" prop="true"/>
</type>

<type name="LineStyle">
   <word name="width" prop="true"/>

    <if expression="ctx->tagVersion &lt; 4">
        <object type="Color" name="color" prop="true"/>
    </if>
    <if expression="ctx->tagVersion &gt; 3">

        <integer name="startCapStyle" size="2" constant-size="true" prop="true"/>
        <integer name="jointStyle" size="2" constant-size="true" prop="true"/>
        <bit name="hasFill" prop="true"/>
        <bit name="noHScale" prop="true"/>
        <bit name="noVScale" prop="true"/>
        <bit name="pixelHinting" prop="true"/>
        <integer name="reserved" size="5" constant-size="true" prop="true"/>
        <bit name="noClose" prop="true"/>
        <integer name="endCapStyle" size="2" constant-size="true" prop="true"/>

        <if expression="jointStyle==2">
		<fixedpoint2 name="miterLimitFactor" signed="false" size="16" constant-size="true" exp="8" prop="true"/>
            	<!-- <word name="miterLimitFactor" prop="true"/>-->
        </if>

        <if expression="hasFill">
            <list name="fillStyles" type="Style" length="1" constant-length="true" prop="true"/>
        </if>
        <if expression="!hasFill">
            <object type="Color" name="fillColor" prop="true"/>
        </if>
    </if>
</type>

<type name="StyleList">
    <byteOrWord name="n_fillStyles"/>
	<list name="fillStyles" type="Style" length="n_fillStyles" prop="true"/>
    <byteOrWord name="n_lineStyles"/>
    <list name="lineStyles" type="LineStyle" length="n_lineStyles" prop="true"/>
	<integer name="fillBits" size="4" constant-size="true" context="true" set-from-bits-needed="n_fillStyles"/>
	<integer name="lineBits" size="4" constant-size="true" context="true" set-from-bits-needed="n_lineStyles"/>
</type>


<type name="ShapeSetup" parent="ShapeItem">
	<bit name="hasNewStyles"/>
	<bit name="hasLineStyle"/>
	<bit name="hasFillStyle1"/>
	<bit name="hasFillStyle0"/>
	<bit name="hasMoveTo"/>
	<flagged flag="hasMoveTo">
		<integer name="xybits" size="5" constant-size="true"/>
		<integer name="x" signed="true" size="xybits" default="0" prop="true"/>
		<integer name="y" signed="true" size="xybits" default="0" prop="true"/>
	</flagged>
	<flagged flag="hasFillStyle0">
		<integer name="fillStyle0" size="ctx->fillBits" default="0" prop="true"/>
	</flagged>
	<flagged flag="hasFillStyle1">
		<integer name="fillStyle1" size="ctx->fillBits" default="0" prop="true"/>
	</flagged>
	<flagged flag="hasLineStyle">
		<integer name="lineStyle" size="ctx->lineBits" default="0" prop="true"/>
	</flagged>
	<flagged flag="hasNewStyles">
		<fill-byte/>
		<object type="StyleList" name="styles" prop="true"/>
	</flagged>
</type>

<type name="CurveTo" parent="ShapeItem">
	<integer name="bits" size="4" constant-size="true"/>
	<integer name="x1" signed="true" size="bits" size-add="2" default="0" prop="true"/>
	<integer name="y1" signed="true" size="bits" size-add="2" default="0" prop="true"/>
	<integer name="x2" signed="true" size="bits" size-add="2" default="0" prop="true"/>
	<integer name="y2" signed="true" size="bits" size-add="2" default="0" prop="true"/>
</type>

<type name="Shape">
	<list type="ShapeItem" name="edges" prop="true" end-condition="item->isEnd()"/>
</type>

<type name="GlyphShape">
	<context param="fillBits" value="1"/>
	<context param="lineBits" value="0"/>
	<integer name="fillBits" size="4" constant-size="true" set-from="1"/>
	<integer name="lineBits" size="4" constant-size="true" set-from="0"/>
	<list type="ShapeItem" name="edges" prop="true" end-condition="item->isEnd()"/>
</type>

<type name="GradientItem">
	<byte name="position" prop="true"/>
	<object name="color" type="Color" prop="true"/>
</type>

<type name="Symbol">
	<word name="objectID" prop="true"/>
	<string name="name" prop="true"/>
</type>

<type name="Parameter">
	<byte name="reg" prop="true"/>
	<string name="name" prop="true"/>
</type>

<type name="UChar">
	<byte name="value" prop="true"/>
</type>
<type name="UShort">
	<word name="value" prop="true"/>
</type>
<type name="ULong">
	<integer size="32" constant-size="true" name="value" prop="true"/>
</type>
<type name="Short">
	<word signed="true" name="value" prop="true"/>
</type>
<type name="Float">
	<float signed="true" name="value" prop="true"/>
</type>

<type name="Kerning">
	<byte name="a" prop="true"/>
	<byte name="b" prop="true"/>
	<integer name="adjustment" signed="true" size="16" constant-size="true" prop="true"/>
</type>
<type name="WideKerning">
	<word name="a" prop="true"/>
	<word name="b" prop="true"/>
	<word signed="true" name="adjustment" prop="true"/>
</type>

<type name="TextEntry">
	<integer name="glyph" size="ctx->glyphBits" prop="true"/>
	<integer name="advance" signed="true" size="ctx->advanceBits" prop="true"/>
</type>

<type name="TextEntry2">
	<integer name="glyph" size="ctx->glyphBits2" prop="true"/>
	<integer name="advance" signed="true" size="ctx->advanceBits2" prop="true"/>
</type>


<type name="TextRecord6">
	<bit name="isSetup" default="0" prop="true"/>
	<flagged flag="isSetup">
		<integer name="reserved" size="3" constant-size="true"/>
		<bit name="hasFont"/>
		<bit name="hasColor"/>
		<bit name="hasMoveX"/>
		<bit name="hasMoveY"/>
		<flagged flag="hasFont">
			<word name="objectID" prop="true"/>
		</flagged>
		<flagged flag="hasColor">
			<object type="Color" name="color" prop="true"/>
		</flagged>
		<flagged flag="hasMoveX">
			<word name="x" signed="true" prop="true"/>
		</flagged>
		<flagged flag="hasMoveY">
			<word name="y" signed="true" prop="true"/>
		</flagged>
		<flagged flag="hasFont">
			<word name="fontHeight" prop="true"/>
		</flagged>
	</flagged>
	<flagged flag="isSetup" negative="true">
		<integer name="nGlyphs" size="7" constant-size="true"/>
		<list type="TextEntry" name="glyphs" length="nGlyphs" prop="true"/>
		<fill-byte/>
	</flagged>
</type>

<type name="TextRecord62">
	<bit name="isSetup" default="0" prop="true"/>
	<flagged flag="isSetup">
		<integer name="reserved" size="3" constant-size="true"/>
		<bit name="hasFont"/>
		<bit name="hasColor"/>
		<bit name="hasMoveX"/>
		<bit name="hasMoveY"/>
		<flagged flag="hasFont">
			<word name="objectID" prop="true"/>
		</flagged>
		<flagged flag="hasColor">
			<object type="Color" name="color" prop="true"/>
		</flagged>
		<flagged flag="hasMoveX">
			<word name="x" signed="true" prop="true"/>
		</flagged>
		<flagged flag="hasMoveY">
			<word name="y" signed="true" prop="true"/>
		</flagged>
		<flagged flag="hasFont">
			<word name="fontHeight" prop="true"/>
		</flagged>
	</flagged>
	<flagged flag="isSetup" negative="true">
		<integer name="nGlyphs" size="7" constant-size="true"/>
		<list type="TextEntry2" name="glyphs" length="nGlyphs" prop="true"/>
		<fill-byte/>
	</flagged>
</type>

<type name="TextRecord7">
	<bit name="isSetup" default="0" prop="true"/>
	<integer name="reserved" size="3" constant-size="true"/>
	<bit name="hasFont"/>
	<bit name="hasColor"/>
	<bit name="hasMoveX"/>
	<bit name="hasMoveY"/>
	<flagged flag="hasFont">
		<word name="objectID" prop="true"/>
	</flagged>
	<flagged flag="hasColor">
		<object type="Color" name="color" prop="true"/>
	</flagged>
	<flagged flag="hasMoveX">
		<word name="x" signed="true" prop="true"/>
	</flagged>
	<flagged flag="hasMoveY">
		<word name="y" signed="true" prop="true"/>
	</flagged>
	<flagged flag="hasFont">
		<word name="fontHeight" prop="true"/>
	</flagged>

	<flagged flag="isSetup">
		<byte name="nGlyphs"/>
		<list type="TextEntry" name="glyphs" length="nGlyphs" prop="true"/>
	</flagged>
	<fill-byte/>
</type>

<type name="TextRecord72">
	<context param="alpha" value="1"/>
	
	<bit name="isSetup" default="0" prop="true"/>
	<integer name="reserved" size="3" constant-size="true"/>
	<bit name="hasFont"/>
	<bit name="hasColor"/>
	<bit name="hasMoveX"/>
	<bit name="hasMoveY"/>
	<flagged flag="hasFont">
		<word name="fontRef" prop="true"/>
	</flagged>
	<flagged flag="hasColor">
		<object type="Color" name="color" prop="true"/>
	</flagged>
	<flagged flag="hasMoveX">
		<word name="x" signed="true" prop="true"/>
	</flagged>
	<flagged flag="hasMoveY">
		<word name="y" signed="true" prop="true"/>
	</flagged>
	<flagged flag="hasFont">
		<word name="fontHeight" prop="true"/>
	</flagged>

	<flagged flag="isSetup">
		<byte name="nGlyphs"/>
		<list type="TextEntry2" name="glyphs" length="nGlyphs" prop="true"/>
	</flagged>
	<fill-byte/>
</type>


<type name="TextRecord">
	<if expression="ctx->tagVersion &lt; 2">
		<list type="TextRecord6" name="records" prop="true"/>
	</if>
	<if expression="ctx->tagVersion >= 2">
		<object type="TextRecord7" name="string" prop="true"/>
	</if>
</type>

<type name="TextRecord2">
	<if expression="ctx->swfVersion &lt; 7">
		<list type="TextRecord62" name="records" prop="true"/>
	</if>
	<if expression="ctx->swfVersion >= 7">
		<object type="TextRecord72" name="textString" prop="true"/>
	</if>
</type>


<type name="Button">
	<integer name="reserved1" size="2" constant-size="true"/>
	<if expression="ctx->swfVersion &lt; 8">
		<integer name="reserved2" size="2" constant-size="true"/>
	</if>
	<if expression="ctx->swfVersion >= 8">
		<bit name="hasBlendMode"/>
		<bit name="hasFilterList"/>
	</if>
	<bit name="hitTest" prop="true"/>
	<bit name="down" prop="true"/>
	<bit name="over" prop="true"/>
	<bit name="up" prop="true"/>
	<if expression="hitTest || down || over || up">
		<word name="objectID" prop="true"/>
		<word name="depth" prop="true"/>
		<object type="Transform" name="transform" prop="true"/>
		<if expression="ctx->tagVersion &gt;= 2">
			<object type="ColorTransform2" name="colorTransform" prop="true"/>
		</if>
		<flagged flag="hasFilterList">
				<byte name="numFilters"/>
				<list type="Filter" name="filters" length="numFilters" prop="true"/>
		</flagged>
		<flagged flag="hasBlendMode">
			<byte name="blendMode" prop="true" default="0"/>
		</flagged>
	</if>
</type>

<type name="Event">
	<fill-byte/>
	
	<word name="flags1" prop="true"/>
	<if expression="ctx->swfVersion>=6">
		<word name="flags2" prop="true"/>
	</if>
	<if expression="(flags1 | flags2)">
<!--
	... not sure about the order here ...

	<if expression="ctx->swfVersion>=6">
		<integer name="reserved" size="13" constant-size="true"/>
		<bit name="construct" prop="true"/>
		<bit name="keyPress" prop="true"/>
		<bit name="dragOut" prop="true"/>
	</if>
	<bit name="dragOver" prop="true"/>
	<bit name="rollOut" prop="true"/>
	<bit name="rollOver" prop="true"/>
	<bit name="releaseOutside" prop="true"/>
	<bit name="release" prop="true"/>
	<bit name="press" prop="true"/>
	<bit name="initialize" prop="true"/>

	<bit name="data" prop="true"/>
	<bit name="keyUp" prop="true"/>
	<bit name="keyDown" prop="true"/>
	<bit name="mouseUp" prop="true"/>
	<bit name="mouseDown" prop="true"/>
	<bit name="mouseMove" prop="true"/>
	<bit name="unload" prop="true"/>
	<bit name="enterFrame" prop="true"/>
	<bit name="load" prop="true"/>

	<if expression="construct|keyPress|dragOut|dragOver|rollOut|rollOver|releaseOutside|release|press|initialize|data|keyUp|keyDown|mouseUp|mouseDown|unload|enterFrame|load">
-->

		<uint32 name="actionLength" size="32" constant-size="true"/>
		<list type="Action" name="actions" prop="true" end="actionLength"/>
	</if>
</type>

<type name="Condition">
	<word name="next" next="true" next-offset="-2" prop="true"/>

	<!-- IdleToOverDown -->
	<bit name="menuEnter" prop="true"/>
	<!-- OutDownToIdle -->
	<bit name="pointerReleaseOutside" prop="true"/>
	<!-- OutDownToOverDown -->
	<bit name="pointerDragEnter" prop="true"/>
	<!-- OverDownToOutDown -->
	<bit name="pointerDragLeave" prop="true"/>
	<!-- OverDownToOverUp -->
	<bit name="pointerReleaseInside" prop="true"/>
	<!-- OverUpToOverDown -->
	<bit name="pointerPush" prop="true"/>
	<!-- OverUpToIdle -->
	<bit name="pointerLeave" prop="true"/>
	<!-- IdleToOverUp -->
	<bit name="pointerEnter" prop="true"/>
	<!-- KeyPress -->
	<integer name="key" size="7" constant-size="true" prop="true"/>
	<!-- IdleToOverDown -->
	<bit name="menuLeave" prop="true"/>

	<list type="Action" name="actions" prop="true"/>
</type>


<!-- ******************** FILTERS ****************** -->

<filter name="UnknownFilter" id="-1">
	<data name="data" size="len" prop="true"/>
</filter>

<filter name="DropShadow" id="0x00">
	<context param="alpha" value="1"/>
	
	<object type="Color" name="color" prop="true"/>
	<fixedpoint2 name="blurX" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="blurY" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="angle" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="distance" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="strength" signed="true" size="16" constant-size="true" exp="8" prop="true"/>
	<bit name="innerShadow" prop="true"/>
	<bit name="knockout" prop="true"/>
	<bit name="compositeSource" default="1"/>
	<integer name="passes" size="5" constant-size="true" prop="true"/>
</filter>

<filter name="Blur" id="0x01">
	<fixedpoint2 name="blurX" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="blurY" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<integer name="passes" size="5" constant-size="true" prop="true"/>
	<integer name="reserved1" size="3" constant-size="true"/>	
</filter>

<filter name="Glow" id="0x02">
	<context param="alpha" value="1"/>
	
	<object type="Color" name="color" prop="true"/>
	<fixedpoint2 name="blurX" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="blurY" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="strength" signed="true" size="16" constant-size="true" exp="8" prop="true"/>
	<bit name="innerGlow" prop="true"/>
	<bit name="knockout" prop="true"/>
	<bit name="compositeSource" default="1"/>
	<integer name="passes" size="5" constant-size="true" prop="true"/>
</filter>

<filter name="Bevel" id="0x03">
	<context param="alpha" value="1"/>
	
	<object type="Color" name="shadowColor" prop="true"/>
	<object type="Color" name="highlightColor" prop="true"/>
	<fixedpoint2 name="blurX" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="blurY" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="angle" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="distance" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="strength" signed="true" size="16" constant-size="true" exp="8" prop="true"/>
	<bit name="innerShadow" prop="true"/>
	<bit name="knockout" prop="true"/>
	<bit name="compositeSource" default="1"/>
	<bit name="onTop" prop="true"/>
	<integer name="passes" size="4" constant-size="true" prop="true"/>
</filter>

<filter name="GradientGlow" id="0x04">
	<context param="alpha" value="1"/>
	
	<byte name="numColors"/>
	<list type="Color" name="colors" length="numColors" prop="true"/>
	<list type="UChar" name="ratio" length="numColors" prop="true"/>
	<fixedpoint2 name="blurX" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="blurY" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="angle" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="distance" signed="true" size="32" constant-size="true" exp="16" prop="true"/>
	<fixedpoint2 name="strength" signed="true" size="16" constant-size="true" exp="8" prop="true"/>
	<bit name="innerGlow" prop="true"/>
	<bit name="knockout" prop="true"/>
	<bit name="compositeSource" default="1"/>
	<bit name="onTop" prop="true"/>
	<integer name="passes" size="4" constant-size="true" prop="true"/>
</filter>

<filter name="Convolution" id="0x05">
	<context param="alpha" value="1"/>
	
	<byte name="matrixX" prop="true"/>
	<byte name="matrixY" prop="true"/>
	<float name="divizor" prop="true"/>
	<float name="bias" prop="true"/>
	<list type="Float" name="matrix" prop="true" length="(matrixX * matrixY)" constant-length="true"/>
	<object type="Color" name="defaultColor" prop="true"/>
	<integer name="reserved" size="5" constant-size="true"/>
	<bit name="clamp" prop="true"/>
	<bit name="preserveAlpha" prop="true"/>
</filter>

<filter name="ColorMatrix" id="0x06">
	<list type="Float" name="matrix" prop="true" length="20" constant-length="true"/>
</filter>

<filter name="GradientBevel" id="0x07">
	<context param="alpha" value="1"/>
	
	<byte name="numColors"/>
	<list type="Color" name="colors" length="numColors" prop="true"/>
	<list type="UChar" name="ratio" length="numColors" prop="true"/>
	<fixedpoint2 name="blurX" signed="true" size="32" constant-size="true" exp="16" prop="true" default="0"/>
	<fixedpoint2 name="blurY" signed="true" size="32" constant-size="true" exp="16" prop="true" default="0"/>
	<fixedpoint2 name="angle" signed="true" size="32" constant-size="true" exp="16" prop="true" default="0"/>
	<fixedpoint2 name="distance" signed="true" size="32" constant-size="true" exp="16" prop="true" default="0"/>
	<fixedpoint2 name="strength" signed="true" size="16" constant-size="true" exp="8" prop="true" default="0"/>
	<bit name="innerGlow" prop="true"/>
	<bit name="knockout" prop="true"/>
	<bit name="compositeSource" default="1"/>
	<bit name="onTop" prop="true"/>
	<integer name="passes" size="4" constant-size="true" prop="true"/>
</filter>

<!-- ******************** STYLES ****************** -->

<style name="Solid" id="0x00">
	<object type="Color" name="color" prop="true"/>
</style>

<style name="LinearGradient" id="0x10">
	<object type="Transform" name="matrix" prop="true"/>
	<if expression="ctx->tagVersion &lt; 4">
		<integer name="reserved" size="4" constant-size="true" prop="true"/>
	</if>
	<if expression="ctx->tagVersion >= 4">
		<integer name="spreadMode" size="2" constant-size="true" prop="true"/>
		<integer name="interpolationMode" size="2" constant-size="true" prop="true"/>
	</if>
	<integer name="count" size="4" constant-size="true"/>
	<list type="GradientItem" name="gradientColors" length="count" prop="true"/>
</style>

<style name="RadialGradient" id="0x12">
	<object type="Transform" name="matrix" prop="true"/>
	<if expression="ctx->tagVersion &lt; 4">
		<integer name="reserved" size="4" constant-size="true" prop="true"/>
	</if>
	<if expression="ctx->tagVersion >= 4">
		<integer name="spreadMode" size="2" constant-size="true" prop="true"/>
		<integer name="interpolationMode" size="2" constant-size="true" prop="true"/>
	</if>
	<integer name="count" size="4" constant-size="true"/>
	<list type="GradientItem" name="gradientColors" length="count" prop="true"/>
</style>

<style name="ShiftedRadialGradient" id="0x13">
	<object type="Transform" name="matrix" prop="true"/>
	<if expression="ctx->tagVersion &lt; 4">
		<integer name="reserved" size="4" constant-size="true" prop="true"/>
	</if>
	<if expression="ctx->tagVersion >= 4">
		<integer name="spreadMode" size="2" constant-size="true" prop="true"/>
		<integer name="interpolationMode" size="2" constant-size="true" prop="true"/>
	</if>
	<integer name="count" size="4" constant-size="true"/>
	<list type="GradientItem" name="gradientColors" length="count" prop="true"/>
	<fixedpoint2 name="shift" signed="true" size="16" constant-size="true" exp="8" prop="true"/>
</style>

<style name="TiledBitmap" id="0x40">
	<word name="objectID" prop="true"/>
	<object type="Transform" name="matrix" prop="true"/>
</style>

<style name="ClippedBitmap" id="0x41">
	<word name="objectID" prop="true"/>
	<object type="Transform" name="matrix" prop="true"/>
</style>

<style name="TiledBitmap2" id="0x42">
	<word name="objectID" prop="true"/>
	<object type="Transform" name="matrix" prop="true"/>
</style>

<style name="ClippedBitmap2" id="0x43">
	<word name="objectID" prop="true"/>
	<object type="Transform" name="matrix" prop="true"/>
</style>

<!-- ******************** TAGS ****************** -->

<tag name="UnknownTag" id="-1">
	<data name="data" size="len" prop="true"/>
</tag>

<tag name="End" id="0x00"/>
<tag name="ShowFrame" id="0x01"/>

<tag name="DefineShape" id="0x02">
	<context param="alpha" value="0"/>
	<context param="many_shapes" value="0"/>
	<context param="tagVersion" value="1"/>
	<word name="objectID" prop="true"/>
	<object type="Rectangle" name="bounds" prop="true"/>
	<object type="StyleList" name="styles" prop="true"/>
	<object type="Shape" name="shapes" prop="true"/>
	<fill-byte/>
</tag>

<tag name="RemoveObject" id="0x05">
	<word name="objectID" prop="true"/>
	<word name="depth" prop="true"/>
</tag>

<tag name="DefineBits" id="0x06">
	<word name="objectID" prop="true"/>
	<!-- only basic support for the id -->
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="SetBackgroundColor" id="0x09">
	<!-- FIXME: alpha?, when len=4 -->
	<context param="alpha" value="0"/>
	<object type="Color" name="color" prop="true" />
</tag>

<tag name="DefineText" id="0x0B">
	<word name="objectID" prop="true"/>
	<object type="Rectangle" name="bounds" prop="true"/>
	<object type="Transform" name="transform" prop="true"/>
	<byte name="glyphBits" context="true"/>
	<byte name="advanceBits" context="true"/>
	<context param="alpha" value="0"/>
	<context param="tagVersion" value="1"/>
	<list name="records" type="TextRecord" prop="true"/>
</tag>

<tag name="DefineText2" id="0x21">
	<context param="alpha" value="1"/>
	
	<word name="objectID" prop="true"/>
	<object type="Rectangle" name="bounds" prop="true"/>
	<object type="Transform" name="transform" prop="true"/>
	<byte name="glyphBits2" context="true"/>
	<byte name="advanceBits2" context="true"/>
	<list name="records" type="TextRecord2" prop="true"/>
</tag>


<tag name="DoAction" id="0x0C">
	<list name="actions" type="Action" prop="true"/>
</tag>

<tag name="DefineFontInfo" id="0x0D">
	<word name="objectID" prop="true"/>
	<!--
		doesnt work for strange encodings (nibbles.swf)
		<string mode="pascal" name="name" prop="true"/>
	-->
	<byte name="nameLength"/>
	<data name="nameData" size="nameLength"/>

	<integer name="reserved" size="2"/>
	<bit name="smallTextOrUnicode" prop="true"/>
	<bit name="isShiftJIS" prop="true"/>
	<bit name="isANSII" prop="true"/>
	<bit name="isItalic" prop="true"/>
	<bit name="isBold" prop="true"/>
	<bit name="isWide" prop="true"/>
	<if expression="ctx->swfVersion>=6">
		<byte name="language" prop="true"/>
	</if>
	<object type="Rest" name="map" prop="true"/>
</tag>

<tag name="DefineSound" id="0x0E">
	<word name="objectID" prop="true"/>
	
	<!-- format values:
		 0 Raw
		 1 ADPCM
		 2 MP3
		 3 Uncompressed
		 6 Nellymoser
	-->
	<integer name="format" size="4" constant-size="true" prop="true"/>
	
	<!-- rate values:
		 0 5512(.5?)
		 1 11025
		 2 22050
		 3 44100
	-->
	<integer name="rate" size="2" constant-size="true" prop="true"/>
	
	<bit name="is16bit" prop="true"/>
	<bit name="stereo" prop="true"/>
	<uint32 name="samples" prop="true"/>
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="StartSound" id="0x0F">
	<word name="objectID" prop="true"/>
	
	<integer name="reserved" size="2" constant-size="true"/>
	<bit name="stopPlayback" prop="true"/>
	<bit name="noMultiple" prop="true"/>
	<bit name="hasEnvelope" prop="true"/>
	<bit name="hasLoop" prop="true"/>
	<bit name="hasOutPoint" prop="true"/>
	<bit name="hasInPoint" prop="true"/>
	
	<flagged flag="hasInPoint">
		<uint32 name="inPoint" prop="true"/>
	</flagged>
	<flagged flag="hasOutPoint">
		<uint32 name="outPoint" prop="true"/>
	</flagged>
	<flagged flag="hasLoop">
		<word name="loop" prop="true"/>
	</flagged>
	<flagged flag="hasEnvelope">
		<byte name="envelopeCount" prop="true"/>
		
		<!-- would be easy to implement, too lazy now, and need a sample -->
		<object type="Rest" name="envelopeData" prop="true"/>
	</flagged>
</tag>

<tag name="DefineShape2" id="0x16">
	<context param="alpha" value="0"/>
	<context param="many_shapes" value="1"/>
	<context param="tagVersion" value="2"/>

	<word name="objectID" prop="true"/>
	<object type="Rectangle" name="bounds" prop="true"/>
	<object type="StyleList" name="styles" prop="true"/>
	<object type="Shape" name="shapes" prop="true"/>
	<fill-byte/>
</tag>

<tag name="DefineShape3" id="0x20">
	<context param="alpha" value="1"/>
	<context param="many_shapes" value="1"/>
	<context param="tagVersion" value="3"/>

	<word name="objectID" prop="true"/>
	<object type="Rectangle" name="bounds" prop="true"/>
	<object type="StyleList" name="styles" prop="true"/>
	<object type="Shape" name="shapes" prop="true"/>
	<fill-byte/>
</tag>

<tag name="DefineShape4" id="0x43">
    <word name="objectID" prop="true"/>
	<object type="Rest" name="data" prop="true"/>

<!-- the above defines basic support for the id only.
    below is probably correct, but i need a sample first.

    <context param="alpha" value="1"/>
	<context param="many_shapes" value="1"/>
	<context param="tagVersion" value="4"/>

	<word name="objectID" prop="true"/>
    <object type="Rectangle" name="bounds" prop="true"/>
    <object type="Rectangle" name="strokeBounds" prop="true"/>
    
	<integer name="reserved" size="6" constant-size="true"/>
	<bit name="nonScalingStrokes" prop="true"/>
	<bit name="scalingStrokes" prop="true"/>
    
    <object type="StyleList" name="styles" prop="true"/>
    <object type="Shape" name="shapes" prop="true"/>
	<fill-byte/>
-->

</tag>

<tag name="DefineShape5" id="0x53">
    <context param="alpha" value="1"/>
	<context param="many_shapes" value="1"/>
	<context param="tagVersion" value="5"/>

	<word name="objectID" prop="true"/>
    <object type="Rectangle" name="bounds" prop="true"/>
    <object type="Rectangle" name="strokeBounds" prop="true"/>
    
	<integer name="reserved" size="6" constant-size="true"/>
    <!-- not quite understanding the sense of having two bits for one booleanoid,
         copying from alexis here once more. -->
	<bit name="nonScalingStrokes" prop="true"/>
	<bit name="scalingStrokes" prop="true"/>
    
    <object type="StyleList" name="styles" prop="true"/>
    <object type="Shape" name="shapes" prop="true"/>
	<fill-byte/>
</tag>


<tag name="DefineMorphShape" id="0x2E">
	<word name="objectID" prop="true"/>
<!-- only basic support for the id -->
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="DefineFontInfo2" id="0x3E">
	<word name="objectID" prop="true"/>
	<!--
		doesnt work for strange encodings (nibbles.swf)
		<string mode="pascal" name="name" prop="true"/>
	-->
	<byte name="nameLength"/>
	<data name="nameData" size="nameLength"/>
	
	<integer name="reserved" size="2"/>
	<bit name="smallTextOrUnicode" prop="true"/>
	<bit name="isShiftJIS" prop="true"/>
	<bit name="isANSII" prop="true"/>
	<bit name="isItalic" prop="true"/>
	<bit name="isBold" prop="true"/>
	<bit name="isWide" prop="true"/>
	<if expression="ctx->swfVersion>=6">
		<byte name="language" prop="true"/>
	</if>
	<object type="Rest" name="map" prop="true"/>
</tag>

<tag name="SoundStreamHead" id="0x12">
	<integer name="reserved" size="4" constant-size="true"/>
	<integer name="playbackRate" size="2" constant-size="true" prop="true"/>
	<bit name="playbackSize" prop="true"/>
	<bit name="playbackStereo" prop="true"/>
	<integer name="compression" size="4" constant-size="true" prop="true"/>
	<integer name="soundRate" size="2" constant-size="true" prop="true"/>
	<bit name="soundSize" prop="true"/>
	<bit name="soundStereo" prop="true"/>
	<word name="sampleSize" prop="true"/>
	<if expression="compression==2">
		<!-- doesnt seem to be always present -->
		<object type="Rest" name="latencySeek" prop="true"/>
	</if>
</tag>

<tag name="DefineBitsLossless" id="0x14">
	<word name="objectID" prop="true"/>
	<byte name="format" prop="true"/>
	<word name="width" prop="true"/>
	<word name="height" prop="true"/>
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="DefineBitsJPEG2" id="0x15">
	<word name="objectID" prop="true"/>
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="DefineBitsJPEG3" id="0x23">
	<word name="objectID" prop="true"/>
	<uint32 name="offset_to_alpha" prop="true"/>
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="DefineBitsLossless2" id="0x24">
	<word name="objectID" prop="true"/>
	<byte name="format" prop="true"/>
	<word name="width" prop="true"/>
	<word name="height" prop="true"/>
	<if expression="format==3">
		<byte name="n_colormap" prop="true"/>
	</if>
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="PlaceObject2" id="0x1A">
	<bit name="hasEventHandler"/>
	<bit name="hasClipDepth"/>
	<bit name="hasName"/>
	<bit name="hasMorph"/>
	<bit name="hasColorTransform"/>
	<bit name="hasTransform"/>
	<bit name="hasID"/>
	<bit name="replace" prop="true"/>
	<word name="depth" prop="true"/>
	<flagged flag="hasID">
		<word name="objectID" prop="true" default="0"/>
	</flagged>
	<flagged flag="hasTransform">
		<object type="Transform" name="transform" prop="true"/>
	</flagged>
	<flagged flag="hasColorTransform">
		<object type="ColorTransform2" name="colorTransform" prop="true"/>
	</flagged>
	<flagged flag="hasMorph">
		<word name="morph" prop="true"/>
	</flagged>
	<flagged flag="hasName">
		<string name="name" prop="true" default="NULL"/>
	</flagged>
	<flagged flag="hasClipDepth">
		<word name="clipDepth" prop="true" default="0"/>
	</flagged>
	<flagged flag="hasEventHandler">
		<word name="reserved"/>
		
		<!-- allflags1/2 should be set of the | of all item's flags -->
		<word name="allflags1" prop="true"/>
		<if expression="ctx->swfVersion>=6">
			<word name="allflags2" prop="true"/>
		</if>
		<list type="Event" name="events" prop="true"
			end-condition="!(item->getflags1() | item->getflags2())"/>
		<!--
				end-condition="!(item->getconstruct() || item->getkeyPress() || item->getdragOut() || item->getdragOver() || item->getrollOut() || item->getrollOver() || item->getreleaseOutside() || item->getrelease() || item->getpress() || item->getinitialize() || item->getdata() || item->getkeyUp() || item->getkeyDown() || item->getmouseUp() || item->getmouseDown() || item->getmouseMove() || item->getunload() || item->getenterFrame() || item->getload() )"/>
			<object type="Rest" name="events" prop="true"/>
		-->
	</flagged>
</tag>

<tag name="RemoveObject2" id="0x1C">
	<word name="depth" prop="true"/>
</tag>

<tag name="DefineEditText" id="0x25">
	<context param="alpha" value="1"/>

	<word name="objectID" prop="true"/>
	<object type="Rectangle" name="size" prop="true"/>
	<bit name="hasText"/>
	<bit name="wordWrap" prop="true"/>
	<bit name="multiLine" prop="true"/>
	<bit name="password" prop="true"/>
	<bit name="readOnly" prop="true"/>
	<bit name="hasColor"/>
	<bit name="hasMaxLength"/>
	<bit name="hasFont"/>
	
	<!-- slight version difference unimplemented -->
	<bit name="reserved"/>
	<bit name="autoSize" prop="true"/>

	<bit name="hasLayout" prop="true"/>
	<bit name="notSelectable" prop="true"/>
	<bit name="hasBorder" prop="true"/>
	<bit name="reserved2"/>
	<bit name="isHTML" prop="true"/>
	<bit name="useOutlines" prop="true"/>

	<flagged flag="hasFont">
		<word name="fontRef" prop="true"/>
		<word name="fontHeight" prop="true"/>
	</flagged>
	<flagged flag="hasColor">
		<object type="Color" name="color" prop="true"/>
	</flagged>
	<flagged flag="hasMaxLength">
		<word name="maxLength" prop="true"/>
	</flagged>
	<flagged flag="hasLayout">
		<byte name="align" prop="true"/>
		<word name="leftMargin" prop="true"/>
		<word name="rightMargin" prop="true"/>
		<word name="indent" signed="true" prop="true"/>
		<word name="leading" signed="true" prop="true"/>
	</flagged>
	<string name="variableName" prop="true"/>
	<flagged flag="hasText">
		<string name="initialText" prop="true"/>
	</flagged>
</tag>

<tag name="DefineSprite" id="0x27">
	<word name="objectID" prop="true"/>
	<word name="frames" prop="true"/>
	<list name="tags" type="Tag" prop="true"/>
</tag>

<tag name="FrameLabel" id="0x2B">
	<string name="label" prop="true"/>
	<object type="Rest" name="flags" prop="true"/>
</tag>

<tag name="SoundStreamHead2" id="0x2D">
	<integer name="reserved" size="4" constant-size="true"/>
	<integer name="playbackRate" size="2" constant-size="true" prop="true"/>
	<bit name="playbackSize" prop="true"/>
	<bit name="playbackStereo" prop="true"/>
	<integer name="compression" size="4" constant-size="true" prop="true"/>
	<integer name="soundRate" size="2" constant-size="true" prop="true"/>
	<bit name="soundSize" prop="true"/>
	<bit name="soundStereo" prop="true"/>
	<word name="sampleSize" prop="true"/>
	<if expression="compression==2">
		<!-- doesnt seem to be always present -->
		<object type="Rest" name="latencySeek" prop="true"/>
	</if>
</tag>

<tag name="DefineFont" id="0x0A">
	<context param="tagVersion" value="1"/>
	<context param="wideGlyphOffsets" value="0"/>
	<word name="objectID" prop="true"/>

	<object type="Rest" name="data" prop="true"/>
<!--
	<object type="GlyphList" name="glyphs" prop="true"/>
-->
</tag>

<tag name="DefineFont2" id="0x30">
	<context param="tagVersion" value="2"/>
	<word name="objectID" prop="true"/>
	<bit name="hasLayout"/>
	<bit name="isShiftJIS" prop="true"/>
	<bit name="isUnicode" prop="true"/>
	<bit name="isANSII" prop="true"/>
	<bit name="wideGlyphOffsets" prop="true" context="inverse"/>
	<bit name="wideMap" context="inverse"/>
	<bit name="italic" prop="true"/>
	<bit name="bold" prop="true"/>
	<byte name="language" prop="true"/>
	<string mode="pascal" name="name" prop="true"/>

	<word name="glyphCount" context="true"/>

	<object type="GlyphList" name="glyphs" prop="true"/>
	
<!--
	<object type="Rest" name="data" prop="true"/>
-->

	<flagged flag="hasLayout">
		<word name="ascent" signed="true" prop="true"/>
		<word name="descent" signed="true" prop="true"/>
		<word name="leading" signed="true" prop="true"/>
		<list name="advance" type="Short" length="glyphCount" prop="true"/>
		<list name="bounds" type="Rectangle" length="glyphCount" prop="true"/>
		<word name="kerningCount" signed="true"/>
		<flagged flag="wideMap">
			<list name="wideKerning" type="WideKerning" length="kerningCount" prop="true"/>
		</flagged>
		<flagged flag="wideMap" negative="true">
			<list name="kerning" type="Kerning" length="kerningCount" prop="true"/>
		</flagged>
	</flagged>
</tag>

<tag name="DefineButton" id="0x07">
	<context param="tagVersion" value="1"/>
	
	<word name="objectID" prop="true"/>
	<list type="Button" name="buttons" end-condition="!(item->gethitTest() || item->getdown() || item->getover() || item->getup())" end-offset="-2" prop="true"/>
	<list type="Action" name="actions" prop="true"/>
</tag>

<tag name="DefineButton2" id="0x22">
	<context param="tagVersion" value="2"/>
	
	<word name="objectID" prop="true"/>
	<integer name="reserved" size="7" constant-size="true"/>
	<bit name="menu" prop="true"/>
	<word name="buttonsSize" prop="true"/>
	<list type="Button" name="buttons" end-condition="!(item->gethitTest() || item->getdown() || item->getover() || item->getup())" end-offset="-2" prop="true"/>
	<list type="Condition" name="conditions" prop="true"/>
</tag>

<tag name="Export" id="0x38">
	<word name="count"/>
	<list name="symbols" type="Symbol" length="count" prop="true"/>
</tag>

<tag name="Import" id="0x39">
	<string name="url" prop="true"/>
	<word name="count"/>
	<list name="symbols" type="Symbol" length="count" prop="true"/>
</tag>

<tag name="DoInitAction" id="0x3B">
	<word name="sprite" prop="true"/>
	<list name="actions" type="Action" prop="true"/>
</tag>

<tag name="SoundStreamBlock" id="0x13">
	<data name="data" size="len" prop="true"/>
</tag>

<tag name="DefineVideoStream" id="0x3C">
	<word name="objectID" prop="true"/>
	<word name="frames" prop="true"/>
	<word name="width" prop="true"/>
	<word name="height" prop="true"/>
	<integer name="reserved" size="5" constant-size="true"/>
	<integer name="deblocking" size="2" constant-size="true" prop="true"/>
	<bit name="smoothing" prop="true"/>
	<byte name="codec" prop="true"/>
</tag>

<tag name="VideoFrame" id="0x3D">
	<word name="objectID" prop="true"/>
	<word name="frame" prop="true"/>
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="ScriptLimits" id="0x41">
	<word name="maxRecursionDepth" prop="true"/>
	<word name="timeout" prop="true"/>
</tag>

<tag name="SetTabIndex" id="0x42">
	<word name="depth" prop="true"/>
	<word name="tabIndex" prop="true"/>
</tag>

<tag name="PlaceObject3" id="0x46">
	<bit name="hasEventHandler"/>
	<bit name="hasClipDepth"/>
	<bit name="hasName"/>
	<bit name="hasMorph"/>
	<bit name="hasColorTransform"/>
	<bit name="hasTransform"/>
	<bit name="hasID"/>
	<bit name="replace" prop="true"/>
	<integer name="reserved1" size="5" constant-size="true"/>
	<bit name="hasCacheAsBitmap"/>
	<bit name="hasBlendMode"/>
	<bit name="hasFilterList"/>
	<word name="depth" prop="true"/>
	<flagged flag="hasID">
		<word name="objectID" prop="true" default="0"/>
	</flagged>
	<flagged flag="hasTransform">
		<object type="Transform" name="transform" prop="true"/>
	</flagged>
	<flagged flag="hasColorTransform">
		<object type="ColorTransform2" name="colorTransform" prop="true"/>
	</flagged>
	<flagged flag="hasMorph">
		<word name="morph" prop="true"/>
	</flagged>
	<flagged flag="hasName">
		<string name="name" prop="true" default="NULL"/>
	</flagged>
	<flagged flag="hasClipDepth">
		<word name="clipDepth" prop="true" default="0"/>
	</flagged>
	<flagged flag="hasFilterList">
			<byte name="numFilters"/>
			<list type="Filter" name="filters" length="numFilters" prop="true"/>
	</flagged>
	<flagged flag="hasBlendMode">
		<byte name="blendMode" prop="true" default="0"/>
	</flagged>
	<flagged flag="hasCacheAsBitmap">
        <!-- alexis swf ref states this as "not in the macromedia docs", dunno... -->
		<byte name="bitmapCaching" prop="true" default="0"/>
	</flagged>
	<flagged flag="hasEventHandler">
		<word name="reserved"/>
		
		<!-- allflags1/2 should be set of the | of all item's flags -->
		<word name="allflags1" prop="true"/>
		<if expression="ctx->swfVersion>=6">
			<word name="allflags2" prop="true"/>
		</if>
		<list type="Event" name="events" prop="true"
			end-condition="!(item->getflags1() | item->getflags2())"/>
		<!--
				end-condition="!(item->getconstruct() || item->getkeyPress() || item->getdragOut() || item->getdragOver() || item->getrollOut() || item->getrollOver() || item->getreleaseOutside() || item->getrelease() || item->getpress() || item->getinitialize() || item->getdata() || item->getkeyUp() || item->getkeyDown() || item->getmouseUp() || item->getmouseDown() || item->getmouseMove() || item->getunload() || item->getenterFrame() || item->getload() )"/>
			<object type="Rest" name="events" prop="true"/>
		-->
	</flagged>
</tag>

<tag name="ImportAssets2" id="0x47">
	<string name="url" prop="true"/>
	<byte name="reserved1" prop="true"/>
	<byte name="reserved2" prop="true"/>
	<word name="count"/>
	<list name="symbols" type="Symbol" length="count" prop="true"/>
</tag>

<tag name="FileAttributes" id="0x45">
	<integer name="reserved1" size="3" constant-size="true"/>
	<bit name="hasMetaData" prop="true"/>
	<integer name="reserved2" size="3" constant-size="true"/>
	<bit name="useNetwork" prop="true"/>
	<integer name="reserved3" size="24" constant-size="true"/>
</tag>

<tag name="DefineFontInfo3" id="0x49">
	<word name="objectID" prop="true"/>
	<!-- only basic support for the id -->
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="CSMTextSettings" id="0x4A">
	<word name="objectID" prop="true"/>
	<integer name="useFlashType" prop="true" size="2" constant-size="true"/>
	<integer name="gridFit" prop="true" size="3" constant-size="true"/>
	<integer name="reserved1" size="3" constant-size="true"/>
	<float name="thickness" prop="true"/>
	<float name="sharpness" prop="true"/>
	<byte name="reserved2"/>
</tag>

<tag name="DefineFont3" id="0x4B">
	<word name="objectID" prop="true"/>
	<!-- only basic support for the id -->
	<object type="Rest" name="data" prop="true"/>
</tag>

<tag name="Metadata" id="0x4D">
    <xml name="RDF" prop="true"/>
</tag>

<tag name="DefineScalingGrid" id="0x4E"> 
	<word name="objectID" prop="true"/> 
	<object type="Rectangle" name="splitter" prop="true"/> 
</tag> 
    
<!-- ******************** ACTIONS ****************** -->

<stackitem name="StackString" id="0x00">
	<string name="value" prop="true"/>
</stackitem>
<stackitem name="StackFloat" id="0x01">
	<float name="value" prop="true"/>
</stackitem>
<stackitem name="StackNull" id="0x02"/>
<stackitem name="StackUndefined" id="0x03"/>
<stackitem name="StackRegister" id="0x04">
	<byte name="reg" prop="true"/>
</stackitem>
<stackitem name="StackBoolean" id="0x05">
	<byte name="value" prop="true"/>
</stackitem>
<stackitem name="StackDouble" id="0x06">
	<double name="value" prop="true"/>
</stackitem>
<stackitem name="StackInteger" id="0x07">
	<uint32 name="value" prop="true"/>
	<!--<integer name="value" size="32" constant-size="true" prop="true"/>-->
</stackitem>
<stackitem name="StackDictionaryLookup" id="0x08">
	<byte name="index" prop="true"/>
</stackitem>
<stackitem name="StackLargeDictionaryLookup" id="0x09">
	<word name="index" prop="true"/>
</stackitem>


<action name="UnknownAction" id="-1">
	<data name="data" size="len" prop="true"/>
</action>
<action name="EndAction" id="0x00"/>
<action name="NextFrame" id="0x04"/>
<action name="PreviousFrame" id="0x05"/>
<action name="Play" id="0x06"/>
<action name="Stop" id="0x07"/>
<action name="ToggleQuality" id="0x08"/>
<action name="StopSound" id="0x09"/>
<action name="AddCast" id="0x0A"/>
<action name="Substract" id="0x0B"/>
<action name="Mulitply" id="0x0C"/>
<action name="Divide" id="0x0D"/>
<action name="EqualCast" id="0x0E"/>
<action name="LessThanCast" id="0x0F"/>
<action name="LogicalAND" id="0x10"/>
<action name="LogicalOR" id="0x11"/>
<action name="LogicalNOT" id="0x12"/>
<action name="StringEqual" id="0x13"/>
<action name="StringLength" id="0x14"/>
<action name="SubString" id="0x15"/>
<action name="Pop" id="0x17"/>
<action name="IntegralPart" id="0x18"/>
<action name="GetVariable" id="0x1C"/>
<action name="SetVariable" id="0x1D"/>
<action name="SetTargetDynamic" id="0x20"/>
<action name="ConcatenateString" id="0x21"/>
<action name="GetProperty" id="0x22"/>
<action name="SetProperty" id="0x23"/>
<action name="DuplicateSprite" id="0x24"/>
<action name="RemoveSprite" id="0x25"/>
<action name="Trace" id="0x26"/>
<action name="StartDrag" id="0x27"/>
<action name="StopDrag" id="0x28"/>
<action name="StringLessThan" id="0x29"/>
<action name="Throw" id="0x2A"/>
<action name="CastObject" id="0x2B"/>
<action name="Implements" id="0x2C"/>
<action name="Random" id="0x30"/>
<action name="MultibyteStringLength" id="0x31"/>
<action name="ORD" id="0x32"/>
<action name="CHR" id="0x33"/>
<action name="GetTimer" id="0x34"/>
<action name="MultibyteSubString" id="0x35"/>
<action name="MultibyteORD" id="0x36"/>
<action name="MultibyteCHR" id="0x37"/>
<action name="Delete" id="0x3A"/>
<action name="DeleteAll" id="0x3B"/>
<action name="SetLocalVariable" id="0x3C"/>
<action name="CallFunction" id="0x3D"/>
<action name="Return" id="0x3E"/>
<action name="Modulo" id="0x3F"/>
<action name="New" id="0x40"/>
<action name="DeclareLocalVariable" id="0x41"/>
<action name="DeclareArray" id="0x42"/>
<action name="DeclareObject" id="0x43"/>
<action name="TypeOf" id="0x44"/>
<action name="GetTarget" id="0x45"/>
<action name="Enumerate" id="0x46"/>
<action name="AddTyped" id="0x47"/>
<action name="LessThanTyped" id="0x48"/>
<action name="EqualTyped" id="0x49"/>
<action name="DefineNumber" id="0x4A"/>
<action name="DefineString" id="0x4B"/>
<action name="Duplicate" id="0x4C"/>
<action name="Swap" id="0x4D"/>
<action name="GetMember" id="0x4E"/>
<action name="SetMember" id="0x4F"/>
<action name="Increment" id="0x50"/>
<action name="Decrement" id="0x51"/>
<action name="CallMethod" id="0x52"/>
<action name="NewMethod" id="0x53"/>
<action name="InstanceOf" id="0x54"/>
<action name="EnumerateObject" id="0x55"/>
<action name="AND" id="0x60"/>
<action name="OR" id="0x61"/>
<action name="XOR" id="0x62"/>
<action name="ShiftLeft" id="0x63"/>
<action name="ShiftRight" id="0x64"/>
<action name="ShiftRightUnsigned" id="0x65"/>
<action name="StrictEqual" id="0x66"/>
<action name="GreaterThanTyped" id="0x67"/>
<action name="StringGreaterThan" id="0x68"/>
<action name="Extends" id="0x69"/>

<action name="GotoFrame" id="0x81">
	<word name="frame" prop="true"/>
</action>

<action name="GetURL" id="0x83">
	<string name="url" prop="true"/>
	<string name="target" prop="true"/>
</action>

<action name="StoreRegister" id="0x87">
	<byte name="reg" prop="true"/>
</action>

<action name="Dictionary" id="0x88">
	<word name="length"/>
	<list name="strings" type="String" length="length" prop="true"/>
</action>

<action name="WaitForFrame" id="0x8A">
	<word name="frame" prop="true"/>
	<byte name="skip" prop="true"/>
</action>

<action name="SetTarget" id="0x8B">
	<string name="label" prop="true"/>
</action>

<action name="GotoLabel" id="0x8C">
	<string name="label" prop="true"/>
</action>

<action name="WaitForFrameDynamic" id="0x8D">
	<word name="frame" prop="true"/>
	<byte name="skip" prop="true"/>
</action>

<action name="DeclareFunction2" id="0x8E" swallow="length">
	<string name="name" prop="true"/>
	<word name="argc" prop="true"/>
	<byte name="regc" prop="true"/>
	
	<bit name="preloadThis" prop="true"/>
	<bit name="suppressThis" prop="true"/>
	<bit name="preloadArguments" prop="true"/>
	<bit name="suppressArguments" prop="true"/>
	<bit name="preloadSuper" prop="true"/>
	<bit name="suppressSuper" prop="true"/>
	<bit name="preloadRoot" prop="true"/>
	<bit name="preloadParent" prop="true"/>
	<bit name="preloadGlobal" prop="true"/>
	<integer name="reserved" size="7" constant-size="true" prop="true"/>
	
	<list name="args" type="Parameter" length="argc" prop="true"/>
	<word name="length"/>
	<list name="actions" type="Action" prop="true" end="length"/>
</action>

<action name="Try" id="0x8F">
	<integer name="reserved" size="5" constant-size="true"/>
	<bit name="catchInRegister"/>
	<bit name="doFinally" prop="true"/>
	<bit name="doCatch" prop="true"/>
	<word name="trySize" prop="true"/>
	<word name="catchSize" prop="true"/>
	<word name="finallySize" prop="true"/>
	<flagged flag="catchInRegister">
		<byte name="reg" prop="true"/>
	</flagged>
</action>

<action name="With" id="0x94">
	<word name="size" prop="true"/>
</action>

<action name="PushData" id="0x96">
	<list name="items" type="StackItem" prop="true"/>
</action>

<action name="GetURL2" id="0x9A">
	<byte name="method" prop="true"/>
</action>

<action name="DeclareFunction" id="0x9B">
	<string name="name" prop="true"/>
	<word name="argc" prop="true"/>
	<list name="args" type="String" length="argc" prop="true"/>
	<word name="length" prop="true"/>
</action>

<action name="BranchAlways" id="0x99">
	<!-- we need a mechanism here to derive offset from XML... -->
	<word name="byteOffset" signed="true" prop="true"/>
</action>

<action name="BranchIfTrue" id="0x9D">
	<!-- we need a mechanism here to derive offset from XML... -->
	<word name="byteOffset" signed="true" prop="true"/>
</action>

<action name="CallFrame" id="0x9E"/>

<action name="GotoExpression" id="0x9F">
	<byte name="play" prop="true"/>
</action>

</format>
